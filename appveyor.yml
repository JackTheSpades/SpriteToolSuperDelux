version: '{build}'
image: Visual Studio 2019
environment:
    matrix:
    - JOB_NAME: "mingw"
      CMAKE_TARGET: "MinGW Makefiles"

install:
    - cmd: >-
        set CFLAGS=-O2 -s -ffunction-sections -fno-strict-aliasing -fdata-sections -Wl,--gc-sections
        cmake %CFLAGS% -m32 -static -static-libgcc -static-libstdc++ -o "pixi.exe" -Wall --std=c++11 -Wno-format src/*.cpp src/MeiMei/*.cpp src/asar/asardll.c src/json/base64.cpp

build:
    verbosity: minimal